esphome:
  name: espectre-c6

esp32:
  variant: ESP32C6 
  partitions: partitions.csv
  framework:
    type: esp-idf
    version: 5.5.1
    sdkconfig_options: 
      # Power Management (critical for CSI reliability)
      CONFIG_PM_ENABLE: n                             # Disable all power management
      CONFIG_ESP_WIFI_STA_DISCONNECTED_PM_ENABLE: n   # No power save when disconnected
      # CSI Feature
      CONFIG_ESP_WIFI_CSI_ENABLED: y                  # Enable CSI extraction from WiFi packets
      CONFIG_ESP_WIFI_11AX_SUPPORT: y                 # Enable WiFi 6 (802.11ax)
      # ESP32-C6-WROOM-1-N8 specific flash size
      CONFIG_ESPTOOLPY_FLASHSIZE_8MB: y               # Flash size 8MB

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:

ota:
  - platform: esphome

logger:
  level: INFO

external_components:
  - source:
      type: local
      path: components
    components: [ espectre ]

# ESPectre - WiFi CSI Motion Detection
espectre:
  traffic_generator_rate: 100   # DNS queries/sec to gateway to generate CSI data (default 100)
  segmentation_threshold: 1.0   # Motion detection sensitivity: lower=more sensitive (0.5-10.0, default 1.0)
  segmentation_window_size: 50  # Analysis window: larger=fewer false positives but slower reaction (10-200, default 50)
  hampel_enabled: true          # Anti-turbulence filter: removes spikes from air currents/fans (default true)

debug:
  update_interval: 5s

sensor:
  - platform: debug
    free:
      name: "Free Heap"
    block:
      name: "Max Free Block"
    loop_time:
      name: "Loop Time"

text_sensor:
  - platform: debug
    device:
      name: "Device Info"
    reset_reason:
      name: "Reset Reason"